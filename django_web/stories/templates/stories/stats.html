{% extends "stories/base.html" %}
{% block title %}NAHB - Stats{% endblock %}

{% block content %}
  <div class="hero">
    <div class="h1">Statistics</div>
    <div class="muted">Stored in Django model: <code>Play</code></div>
    <div class="row" style="margin-top:14px;">
      <a class="btn" href="{% url 'story_list' %}">‚Üê Back to stories</a>
    </div>
  </div>

  <div class="grid two">
    <div class="card">
      <p class="title">Plays per story</p>
      {% if plays_per_story %}
        <table class="table">
          <tr><th>Story</th><th>Plays</th></tr>
          {% for row in plays_per_story %}
            <tr>
              <td>#{{ row.story_id }}</td>
              <td><b>{{ row.plays }}</b></td>
            </tr>
          {% endfor %}
        </table>
      {% else %}
        <p class="desc">No plays yet.</p>
      {% endif %}
    </div>

    <div class="card">
      <p class="title">Endings reached</p>
      {% if endings %}
        <table class="table">
          <tr><th>Story</th><th>Ending page</th><th>Count</th></tr>
          {% for row in endings %}
            <tr>
              <td>#{{ row.story_id }}</td>
              <td>#{{ row.ending_page_id }}</td>
              <td><b>{{ row.count }}</b></td>
            </tr>
          {% endfor %}
        </table>
      {% else %}
        <p class="desc">No endings yet.</p>
      {% endif %}
    </div>
  </div>
{% endblock %}
