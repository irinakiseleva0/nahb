{% extends "stories/base.html" %}
{% block title %}NAHB - Delete story{% endblock %}

{% block content %}
  <div class="hero">
    <div class="h1">Delete story</div>
    <div class="muted">
      This will delete the story in Flask. (Plays stored in Django will remain unless you delete them separately.)
    </div>

    <div class="row" style="margin-top:14px;">
      <a class="btn" href="{% url 'story_list' %}">‚Üê Back to stories</a>
      {% if story and story.id %}
        <a class="btn" href="{% url 'story_edit' story.id %}">‚úèÔ∏è Edit</a>
        <a class="btn primary" href="{% url 'story_builder' story.id %}">üß± Build</a>
      {% endif %}
    </div>
  </div>

  <div class="grid two">
    <!-- CONFIRM CARD -->
    <div class="card">
      <p class="title" style="font-size:20px; margin-bottom:6px;">Confirm deletion</p>
      <p class="desc" style="margin-bottom:14px;">
        You are about to permanently delete this story:
      </p>

      <div class="card" style="background:#fff; border:1px solid rgba(17,24,39,.12); box-shadow:none;">
        <p class="title" style="margin-bottom:6px;">
          {{ story.title|default:"(no title)" }}
        </p>
        <p class="desc">
          {{ story.description|default:"(no description)" }}
        </p>
        <p class="muted" style="margin-top:10px;">
          id: <code>{{ story.id }}</code>
          {% if story.status %} ¬∑ status: <code>{{ story.status }}</code>{% endif %}
          {% if story.start_page_id %} ¬∑ start_page_id: <code>{{ story.start_page_id }}</code>{% endif %}
        </p>
      </div>

      <form method="post" style="margin-top:16px;">
        {% csrf_token %}
        <div class="row">
          <button class="btn danger" type="submit">Confirm delete</button>
          <a class="btn" href="{% url 'story_list' %}">Cancel</a>
        </div>
      </form>
    </div>

    <!-- SIDE INFO CARD -->
    <div class="card">
      <p class="title">What gets deleted?</p>

      <div class="pillRow">
        <span class="pill"><span class="dot err"></span>Flask story</span>
        <span class="pill"><span class="dot err"></span>Flask pages/choices</span>
        <span class="pill"><span class="dot ok"></span>Django plays stay</span>
      </div>

      <div class="muted" style="margin-top:12px; line-height:1.6;">
        <ul style="margin: 8px 0 0; padding-left: 18px;">
          <li>Deleting is not reversible.</li>
          <li>If you only want to hide it, set status to <code>draft</code> instead.</li>
          <li>You can keep stats/plays for reporting even after deletion.</li>
        </ul>
      </div>

      {% if story and story.id %}
        <div class="row" style="margin-top:16px;">
          <a class="btn full" href="{% url 'story_edit' story.id %}">Instead: set to draft</a>
        </div>
      {% endif %}
    </div>
  </div>
{% endblock %}
