{% extends "stories/base.html" %}
{% block title %}NAHB - Builder{% endblock %}

{% block content %}
  <div class="hero">
    <div class="h1">Builder: {{ story.title }}</div>
    <p class="muted">Story id: {{ story.id }} | status: {{ story.status }} | start_page_id: {{ story.start_page_id }}</p>
  </div>

  <div class="grid two">
    <div class="card">
      <div class="cardHeader">
        <div>
          <p class="title">Add page</p>
          <p class="desc">Create a page in Flask for this story.</p>
        </div>
      </div>

      <form method="post">
        {% csrf_token %}
        <input type="hidden" name="action" value="add_page" />

        <label>Text</label>
        {{ page_form.text }}
        {% if page_form.text.errors %}<div class="help">{{ page_form.text.errors|striptags }}</div>{% endif %}

        <label style="display:flex; gap:10px; align-items:center; margin-top:12px;">
          {{ page_form.is_ending }} <span style="font-weight:900;">Ending page?</span>
        </label>

        <label>Ending label (optional)</label>
        {{ page_form.ending_label }}

        <div class="row">
          <button class="btn primary" type="submit">Create page</button>
        </div>
      </form>
    </div>

    <div class="card">
      <div class="cardHeader">
        <div>
          <p class="title">Add choice</p>
          <p class="desc">Link a page to the next page.</p>
        </div>
      </div>

      <form method="post">
        {% csrf_token %}
        <input type="hidden" name="action" value="add_choice" />

        <label>From page_id</label>
        {{ choice_form.page_id }}

        <label>To next_page_id</label>
        {{ choice_form.next_page_id }}

        <label>Choice text</label>
        {{ choice_form.text }}

        <div class="row">
          <button class="btn primary" type="submit">Create choice</button>
        </div>
      </form>
    </div>
  </div>

  <div class="card" style="margin-top:14px;">
    <p class="title">Next steps</p>
    <div class="pillRow">
      <span class="pill"><span class="dot warn"></span> Create start page</span>
      <span class="pill"><span class="dot warn"></span> Set start_page_id in Edit story</span>
      <span class="pill"><span class="dot ok"></span> Press Play</span>
    </div>
  </div>
{% endblock %}
